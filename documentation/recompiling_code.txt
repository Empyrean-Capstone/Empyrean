This documentation describes how to pull new code onto a production
machine and recompile the
1. Nginx Website
2. The flask serviceand instrument services

0. Pulling new code:

a. Move to the root directory of the project.

b. Check if there have been changes to the repository with:
$ git status

if there are any changes that need to stick around, save them with:
$ git stash

c. Pull new changes with:
$ git pull

d. bring back previously made changes with:
$ git stash pop

1. Recompiling react and reloading nginx:

a. In the root directory, recompile the production version of the website with:
$ yarn build
or
$ npm run build

b. Restart nginx with:
sudo nginx -s restart

2. Restart the services (flask, camera, spectrograph)

2.1 There are two ways to do this. If the user has a paid version of launch control,
they can restart the services that way.
Opening it, click on each of the services, unload and reload them.
This button is at the top center of the window when a service is clicked

2.2 Else, we can do this arguably easier from the command line:

a. cd into the directory of the services:
$ cd /Library/LaunchDeamons/

b. for this example, all of the services start with 'com.empyrean'
if your services are differently named, replace that substring with the beginning of your services:

$ sudo launchctl unload com.empyrean.*
$ sudo launchctl load com.empyrean.*
